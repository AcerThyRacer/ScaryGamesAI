// Caribbean Conquest - Player Controller // Extends PlayerShip with player-specific functionality // Note: PlayerShip class is defined in ship.js // This file adds additional player-specific features class PlayerController { constructor(game) { this.game = game; // Player stats this.gold = 1000; this.renown = 0; this.cargo = []; // Discovered locations this.discoveredIslands = []; this.discoveredPorts = []; // Fleet this.fleet = []; // Max ships in fleet this.maxFleetSize = 5; } // Add ship to fleet addShipToFleet(ship) { if (this.fleet.length >= this.maxFleetSize) { return false; } this.fleet.push(ship); return true; } // Remove ship from fleet removeShipFromFleet(ship) { const index = this.fleet.indexOf(ship); if (index > -1) { this.fleet.splice(index, 1); return true; } return false; } // Add cargo addCargo(item, quantity = 1) { const existing = this.cargo.find(c => c.item === item); if (existing) { existing.quantity += quantity; } else { this.cargo.push({ item, quantity }); } } // Remove cargo removeCargo(item, quantity = 1) { const existing = this.cargo.find(c => c.item === item); if (existing && existing.quantity >= quantity) { existing.quantity -= quantity; if (existing.quantity <= 0) { const index = this.cargo.indexOf(existing); this.cargo.splice(index, 1); } return true; } return false; } // Add gold addGold(amount) { this.gold += amount; this.game.hud?.showNotification('Gold Earned', '+' + amount + ' Gold'); } // Add renown addRenown(amount) { this.renown += amount; this.game.hud?.showNotification('Renown Earned', '+' + amount + ' Renown'); } // Get player rank getRank() { const ranks = [ { name: 'Cabin Boy', renown: 0 }, { name: 'Sailor', renown: 500 }, { name: 'Boatswain', renown: 2000 }, { name: 'First Mate', renown: 5000 }, { name: 'Captain', renown: 12000 }, { name: 'Commodore', renown: 30000 }, { name: 'Admiral', renown: 75000 }, { name: 'Pirate King', renown: 150000 } ]; for (let i = ranks.length - 1; i >= 0; i--) { if (this.renown >= ranks[i].renown) { return ranks[i]; } } return ranks[0]; } // Save player data saveData() { return { gold: this.gold, renown: this.renown, cargo: this.cargo, discoveredIslands: this.discoveredIslands, discoveredPorts: this.discoveredPorts, fleet: this.fleet.map(s => ({ type: s.type, hp: s.hp })) }; } // Load player data loadData(data) { if (data.gold !== undefined) this.gold = data.gold; if (data.renown !== undefined) this.renown = data.renown; if (data.cargo) this.cargo = data.cargo; if (data.discoveredIslands) this.discoveredIslands = data.discoveredIslands; if (data.discoveredPorts) this.discoveredPorts = data.discoveredPorts; } }