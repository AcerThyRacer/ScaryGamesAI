// Caribbean Conquest - HUD System // Handles all UI elements, notifications, and player feedback class HUD { constructor(game) { this.game = game; // Notification queue this.notifications = []; this.notificationTimeout = 3000; // Map state this.mapVisible = false; // Elements this.elements = {}; } init() { // Cache DOM elements this.elements = { hullBar: document.getElementById('hull-bar'), sailBar: document.getElementById('sail-bar'), crewBar: document.getElementById('crew-bar'), cargoBar: document.getElementById('cargo-bar'), shipSpeed: document.getElementById('ship-speed'), windSpeed: document.getElementById('wind-speed'), windDir: document.getElementById('wind-dir'), notifications: document.getElementById('notifications'), pauseMenu: document.getElementById('pause-menu') }; // Setup action bar clicks this.setupActionBar(); return true; } setupActionBar() { const slots = document.querySelectorAll('.action-slot'); slots.forEach(slot => { slot.addEventListener('click', () => { const action = slot.dataset.action; this.handleAction(action); }); }); } handleAction(action) { const player = this.game.player; if (!player) return; switch (action) { case 'fire-left': player.fireCannons('left'); this.flashAction('fire-left'); break; case 'fire-right': player.fireCannons('right'); this.flashAction('fire-right'); break; case 'anchor': player.anchorDown = !player.anchorDown; this.showNotification( player.anchorDown ? 'Anchor Down' : 'Anchor Raised', player.anchorDown ? 'Ship stopped' : 'Ready to sail' ); break; case 'repair': this.showNotification('Repairing...', 'Crew is fixing the hull'); // TODO: Implement repair system break; case 'map': this.toggleMap(); break; } } update(dt) { // Update any animated elements } showNotification(title, text) { const container = this.elements.notifications; if (!container) return; const notification = document.createElement('div'); notification.className = 'notification'; notification.innerHTML = ` <div class="notification-title">${title}</div> <div class="notification-text">${text}</div> `; container.appendChild(notification); // Remove after animation setTimeout(() => { notification.remove(); }, 3000); } flashAction(actionId) { const slot = document.querySelector(`[data-action="${actionId}"]`); if (slot) { slot.classList.add('active'); setTimeout(() => { slot.classList.remove('active'); }, 200); } } toggleMap() { this.mapVisible = !this.mapVisible; // TODO: Implement world map overlay this.showNotification( this.mapVisible ? 'Map Opened' : 'Map Closed', 'World map coming soon' ); } updateMinimap(ships, playerPos) { // Update minimap with ship positions const minimap = document.querySelector('.minimap'); if (!minimap) return; // Clear existing markers const markers = minimap.querySelectorAll('.minimap-ship'); markers.forEach(m => m.remove()); // Add markers for each ship const scale = 0.5; // Scale factor for minimap for (const ship of ships) { if (ship.isPlayer) continue; const marker = document.createElement('div'); marker.className = 'minimap-ship'; marker.style.cssText = ` position: absolute; width: 4px; height: 4px; background: ${ship.faction === 'pirate' ? '#ff0000' : '#ffff00'}; border-radius: 50%; transform: translate(-50%, -50%); `; // Calculate relative position const relX = (ship.position.x - playerPos.x) * scale; const relZ = (ship.position.z - playerPos.z) * scale; marker.style.left = `calc(50% + ${relX}px)`; marker.style.top = `calc(50% + ${relZ}px)`; minimap.appendChild(marker); } } showDamageIndicator(direction) { // Show directional damage indicator const indicator = document.createElement('div'); indicator.className = 'damage-indicator'; indicator.style.cssText = ` position: fixed; top: 50%; left: 50%; width: 100px; height: 100px; transform: translate(-50%, -50%) rotate(${direction}deg); pointer-events: none; `; indicator.innerHTML = ` <svg viewBox="0 0 100 100"> <path d="M50 10 L60 40 L50 30 L40 40 Z" fill="rgba(255,0,0,0.5)"/> </svg> `; document.body.appendChild(indicator); setTimeout(() => indicator.remove(), 1000); } showLowHealth() { // Add red vignette effect const vignette = document.createElement('div'); vignette.id = 'low-health-vignette'; vignette.style.cssText = ` position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; box-shadow: inset 0 0 100px rgba(255, 0, 0, 0.3); z-index: 99; animation: pulse 1s infinite; `; document.body.appendChild(vignette); } hideLowHealth() { const vignette = document.getElementById('low-health-vignette'); if (vignette) vignette.remove(); } showVictory(rewards) { const overlay = document.createElement('div'); overlay.className = 'victory-overlay'; overlay.style.cssText = ` position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 300; `; overlay.innerHTML = ` <div style="font-size: 48px; color: #ffd700; margin-bottom: 20px;">‚öîÔ∏è Victory! ‚öîÔ∏è</div> <div style="font-size: 24px; color: #fff; margin-bottom: 30px;">Enemy Ship Sunk!</div> <div style="font-size: 18px; color: #88ff88;">+${rewards.gold} Gold</div> <div style="font-size: 18px; color: #88ffff;">+${rewards.renown} Renown</div> <button onclick="this.parentElement.remove()" style=" margin-top: 30px; padding: 15px 30px; font-size: 18px; background: rgba(255,215,0,0.2); border: 2px solid #ffd700; color: #ffd700; cursor: pointer; ">Continue</button> `; document.body.appendChild(overlay); } showDeath() { const overlay = document.createElement('div'); overlay.className = 'death-overlay'; overlay.style.cssText = ` position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 300; `; overlay.innerHTML = ` <div style="font-size: 48px; color: #ff4444; margin-bottom: 20px;">üíÄ Ship Sunk üíÄ</div> <div style="font-size: 24px; color: #fff; margin-bottom: 30px;">Your vessel has been destroyed!</div> <button onclick="location.reload()" style=" margin-top: 30px; padding: 15px 30px; font-size: 18px; background: rgba(255,68,68,0.2); border: 2px solid #ff4444; color: #ff4444; cursor: pointer; ">Try Again</button> `; document.body.appendChild(overlay); } }