# ScaryGamesAI Environment Configuration
# Copy this file to .env and fill in your values

# Server Configuration
PORT=9999
NODE_ENV=development
DOMAIN=http://localhost:9999
# Comma-separated origin allowlist for CORS (required in production)
CORS_ALLOWED_ORIGINS=http://localhost:9999

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# JWT Secret (for authentication)
JWT_SECRET=your_super_secret_jwt_key_here

# OAuth (Google / Discord / Steam)
# Redirect URIs should point to the static callback page shipped with the frontend.
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_GOOGLE_REDIRECT_URI=http://localhost:9999/oauth/callback.html?provider=google
OAUTH_DISCORD_CLIENT_ID=
OAUTH_DISCORD_CLIENT_SECRET=
OAUTH_DISCORD_REDIRECT_URI=http://localhost:9999/oauth/callback.html?provider=discord
# Steam uses OpenID 2.0, not OAuth code exchange.
OAUTH_STEAM_REDIRECT_URI=http://localhost:9999/oauth/callback.html?provider=steam

# Auth hardening flags
# In production: AUTH_ALLOW_DEV_BYPASS must remain false
AUTH_ALLOW_DEV_BYPASS=false
# In production: AUTH_DISABLE_DEMO_TOKEN must remain true
AUTH_DISABLE_DEMO_TOKEN=true
AUTH_USE_SECURE_COOKIES=false
# In production: AUTH_COOKIE_SECURE must remain true
AUTH_COOKIE_SECURE=false
AUTH_COOKIE_SAMESITE=Lax
AUTH_COOKIE_PATH=/api/auth
REQUIRE_2FA_FOR_MONETIZATION=false
OAUTH_LINKING_REQUIRE_EMAIL_MATCH=true
# Optional session touch write-throttling interval in seconds (min effective 5)
AUTH_SESSION_TOUCH_MIN_INTERVAL_SECONDS=30
# Required in production: base64-encoded 32-byte AES key for TOTP secret encryption
# Example generation (Node): node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
AUTH_TOTP_ENCRYPTION_KEY=

# Data Provider (optional)
# json (default fallback) or postgres
DB_PROVIDER=json

# PostgreSQL (optional)
# Enable PostgreSQL by setting DB_PROVIDER=postgres and DATABASE_URL
DATABASE_URL=
PG_SSL=false
PG_POOL_MAX=10
PG_IDLE_TIMEOUT_MS=30000

# Redis Cache (optional)
# If REDIS_URL is not set, in-memory cache fallback is used
REDIS_URL=

# Observability
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
APP_RELEASE=dev
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=
CLOUDWATCH_EMF_ENABLED=true
CLOUDWATCH_METRIC_NAMESPACE=ScaryGamesAI/API
# Structured observability hooks (privacy-safe, sampled)
OBS_STRUCTURED_LOGS_ENABLED=true
OBS_SECURITY_SAMPLE_RATE=0.15
OBS_PERF_SAMPLE_RATE=0.1
OBS_SLOW_REQUEST_MS=750

# Feature Flag Administration
FEATURE_FLAG_ADMIN_USER_IDS=

# Email Configuration (for future use)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password

# Feature Flags
ENABLE_AI_RECOMMENDATIONS=true
ENABLE_BATTLE_PASS=true
ENABLE_REFERRALS=true
ENABLE_COMMUNITY_GOALS=true
